package com.oxleya.malwareconnector.gateway;

import org.springframework.integration.annotation.MessagingGateway;
import org.springframework.messaging.handler.annotation.Header;
import org.springframework.messaging.handler.annotation.Payload;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

import java.io.File;

@MessagingGateway(defaultRequestChannel = "unknownFileInputChannel")
public interface PushFileForProcessingGateway {

    /**
     *
     * @param file
     * @param parentFileId - the ID of the parent file as stored in the data store.
     */
    @Transactional(propagation = Propagation.REQUIRES_NEW)
    void push(@Payload File file, @Header("parentFileId") Long parentFileId);
}
